-- 1. power_plants 테이블에 필요한 컬럼 추가 (이미 실행했다면 생략 가능)
ALTER TABLE public.power_plants
ADD COLUMN IF NOT EXISTS classification VARCHAR(50),
ADD COLUMN IF NOT EXISTS plant_unit VARCHAR(50),
ADD COLUMN IF NOT EXISTS commissioning_date VARCHAR(50),
ADD COLUMN IF NOT EXISTS fuel_type VARCHAR(50),
ADD COLUMN IF NOT EXISTS notes TEXT,
ADD COLUMN IF NOT EXISTS info_link TEXT;

-- 2. 모든 발전소 및 관련 활동 게시물 삭제
DELETE FROM public.activity_posts;
DELETE FROM public.power_plants;

-- 3. CSV 기반 39개 발전소 전체 데이터 삽입 (위도/경도 포함)
INSERT INTO public.power_plants (id, operator, classification, name, address, plant_unit, capacity_mw, commissioning_date, fuel_type, notes, info_link, latitude, longitude) VALUES
-- KOSPO
('00000000-0000-0000-0000-000000000001', '한국남부발전(KOSPO)', '석탄', '하동발전본부', '경남 하동군 금성면', '1~8호기', 4000, '''97.03~''09.06', '유연탄', NULL, 'https://www.kospo.co.kr/kospo/20/subview.do', 34.980, 127.832),
('00000000-0000-0000-0000-000000000002', '한국남부발전(KOSPO)', '석탄', '삼천포발전본부', '경남 사천시 노례동', '5, 6호기', 1000, '''97.10', '유연탄', NULL, 'https://www.kospo.co.kr/kospo/20/subview.do', 34.918, 128.064),
('00000000-0000-0000-0000-000000000003', '한국남부발전(KOSPO)', '석탄', '고성하이발전소', '경남 고성군 하이면', '1, 2호기', 2080, '''21.05', '유연탄', '남부발전 지분 참여', 'https://www.kospo.co.kr/kospo/20/subview.do', 34.925, 128.148),
('00000000-0000-0000-0000-000000000004', '한국남부발전(KOSPO)', 'LNG', '신인천발전본부', '인천 서구 청라동', '복합', 1800, '''16.11', 'LNG', NULL, 'https://www.kospo.co.kr/kospo/20/subview.do', 37.528, 126.618),
('00000000-0000-0000-0000-000000000005', '한국남부발전(KOSPO)', 'LNG', '신세종빛드림', '세종시 가람동', '1호기', 630, '''23.11', 'LNG', NULL, 'https://www.kospo.co.kr/kospo/20/subview.do', 36.476, 127.247),
('00000000-0000-0000-0000-000000000006', '한국남부발전(KOSPO)', 'LNG', '안동발전본부', '경북 안동시 풍산읍', '1호기', 417, '''13.03', 'LNG', NULL, 'https://www.kospo.co.kr/kospo/20/subview.do', 36.561, 128.611),
('00000000-0000-0000-0000-000000000007', '한국남부발전(KOSPO)', '건설중', '안동발전본부', '경북 안동시 풍산읍', '2호기', 501, '''26.12(예정)', 'LNG', '하동 1호기 대체', 'https://www.kospo.co.kr/kospo/20/subview.do', 36.561, 128.611),
-- KOEN
('00000000-0000-0000-0000-000000000008', '한국남동발전(KOEN)', '석탄', '영흥발전본부', '인천 옹진군 영흥면', '1~6호기', 5080, '''04.07~''14.12', '유연탄', '1,2호기 LNG 대체 건설 예정', 'https://www.koenergy.kr/ko/content/166', 37.251, 126.502),
('00000000-0000-0000-0000-000000000009', '한국남동발전(KOEN)', '석탄', '삼천포발전본부', '경남 사천시 노례동', '3~6호기', 2000, '''93.12~''98.12', '유연탄', '1,2호기 폐지, 3,4호기 ''24년 폐지 예정', 'https://www.koenergy.kr/ko/content/166', 34.918, 128.064),
('00000000-0000-0000-0000-000000000010', '한국남동발전(KOEN)', 'LNG', '분당발전본부', '경기 성남시 분당구', '복합', 922, '''92.06~''97.04', 'LNG', '지역난방 열공급', 'https://www.koenergy.kr/ko/content/166', 37.391, 127.124),
('00000000-0000-0000-0000-000000000011', '한국남동발전(KOEN)', '건설중', '영흥발전본부', '인천 옹진군 영흥면', 'LNG 1,2호기', 1120, '''28.12(예정)', 'LNG', '영흥 1,2호기 대체', 'https://www.koenergy.kr/ko/content/166', 37.251, 126.502),
('00000000-0000-0000-0000-000000000012', '한국남동발전(KOEN)', '바이오/중유', '영동에코발전본부', '강원 강릉시 안인리', '1, 2호기', 375, '''17,''20(전환)', '바이오매스', '국내 최초 석탄→바이오 전환', 'https://www.koenergy.kr/ko/content/166', 37.728, 129.006),
('00000000-0000-0000-0000-000000000013', '한국남동발전(KOEN)', '바이오/중유', '여수발전본부', '전남 여수시 월내동', '2호기', 350, '''16.01', '바이오', NULL, 'https://www.koenergy.kr/ko/content/166', 34.782, 127.702),
('00000000-0000-0000-0000-000000000014', '한국남동발전(KOEN)', '바이오/중유', '여수발전본부', '전남 여수시 월내동', '1호기', 323.4, '''75.02', '중유', NULL, 'https://www.koenergy.kr/ko/content/166', 34.782, 127.702),
-- KOMIPO
('00000000-0000-0000-0000-000000000015', '한국중부발전(KOMIPO)', '석탄', '보령발전본부', '충남 보령시 오천면', '3~6호기', 2000, '''93.04~''94.06', '유연탄', '1,2호기 폐지', 'https://www.komipo.co.kr/kor/content/135/main.do', 36.438, 126.509),
('00000000-0000-0000-0000-000000000016', '한국중부발전(KOMIPO)', '석탄', '신보령발전본부', '충남 보령시 주교면', '1, 2호기', 2000, '''16.06~''17.06', '유연탄', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 36.438, 126.509),
('00000000-0000-0000-0000-000000000017', '한국중부발전(KOMIPO)', 'LNG', '보령발전본부', '충남 보령시 오천면', '7, 8호기', 1000, '''06.06', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 36.438, 126.509),
('00000000-0000-0000-0000-000000000018', '한국중부발전(KOMIPO)', 'LNG', '인천발전본부', '인천 서구 원창동', '복합 3,4호기', 1038, '''10.12~''11.06', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 37.494, 126.621),
('00000000-0000-0000-0000-000000000019', '한국중부발전(KOMIPO)', 'LNG', '서울발전본부', '서울 마포구 당인동', '복합 1,2호기', 800, '''19.11', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 37.545, 126.914),
('00000000-0000-0000-0000-000000000020', '한국중부발전(KOMIPO)', 'LNG', '제주발전본부', '제주시 삼양일동', '복합 1,2호기', 240, '''18.06', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 33.525, 126.601),
('00000000-0000-0000-0000-000000000021', '한국중부발전(KOMIPO)', '건설중', '보령 신복합', '충남 보령시 오천면', '1, 2호기', 1000, '''26.12(예정)', 'LNG', '보령 5,6호기 대체', 'https://www.komipo.co.kr/kor/content/135/main.do', 36.438, 126.509),
('00000000-0000-0000-0000-000000000022', '한국중부발전(KOMIPO)', '건설중', '인천 신복합', '인천 서구 원창동', '1, 2호기', 1000, '''28.06(예정)', 'LNG', '인천 복합 1,2호기 대체', 'https://www.komipo.co.kr/kor/content/135/main.do', 37.494, 126.621),
('00000000-0000-0000-0000-000000000023', '한국중부발전(KOMIPO)', '건설중', '제주복합', '제주시 삼양일동', '3호기', 150, '''27.12(예정)', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 33.525, 126.601),
('00000000-0000-0000-0000-000000000024', '한국중부발전(KOMIPO)', '건설중', '함안복합', '경남 함안군 군북면', NULL, 500, '''27.12(예정)', 'LNG', NULL, 'https://www.komipo.co.kr/kor/content/135/main.do', 35.266, 128.411),
('00000000-0000-0000-0000-000000000025', '한국중부발전(KOMIPO)', '건설중', '용인 반도체 클러스터 집단에너지', '경기 용인시 처인구 원삼면', NULL, 1200, '''26.12(예정)', 'LNG', 'SK하이닉스 반도체 클러스터 공급', 'https://www.komipo.co.kr/kor/content/135/main.do', 37.193, 127.354),
-- KOWEPO
('00000000-0000-0000-0000-000000000026', '한국서부발전(KOWEPO)', '석탄', '태안발전본부', '충남 태안군 원북면', '1~10호기', 6100, '''95.06~''16.12', '유연탄', 'IGCC 포함', 'https://www.iwest.co.kr/iwest/173/subview.do', 36.901, 126.230),
('00000000-0000-0000-0000-000000000027', '한국서부발전(KOWEPO)', 'LNG', '평택발전본부', '경기 평택시 포승읍', '복합', 868, '''98.12~''06.07', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 37.013, 126.837),
('00000000-0000-0000-0000-000000000028', '한국서부발전(KOWEPO)', 'LNG', '서인천발전본부', '인천 서구 청라동', '복합', 1800, '''92.06~''97.04', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 37.528, 126.618),
('00000000-0000-0000-0000-000000000029', '한국서부발전(KOWEPO)', 'LNG', '군산발전본부', '전북 군산시 소룡동', '복합', 718, '''01.03~''01.12', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 35.966, 126.591),
('00000000-0000-0000-0000-000000000030', '한국서부발전(KOWEPO)', 'LNG', '김포열병합', '경기 김포시 양촌읍', NULL, 350, '''12.07', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 37.643, 126.623),
('00000000-0000-0000-0000-000000000031', '한국서부발전(KOWEPO)', '건설중', '구미복합', '경북 구미시 구포동', NULL, 501.4, '''25.12(예정)', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 36.143, 128.431),
('00000000-0000-0000-0000-000000000032', '한국서부발전(KOWEPO)', '건설중', '공주복합', '충남 공주시 이인면', NULL, 500, '''27.06(예정)', 'LNG', NULL, 'https://www.iwest.co.kr/iwest/173/subview.do', 36.351, 127.093),
-- EWP
('00000000-0000-0000-0000-000000000033', '한국동서발전(EWP)', '석탄', '당진발전본부', '충남 당진시 석문면', '1~10호기', 6040, '''01.03~''16.06', '유연탄', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 37.042, 126.551),
('00000000-0000-0000-0000-000000000034', '한국동서발전(EWP)', 'LNG', '울산발전본부', '울산 남구 용연동', '복합 1~4호기', 2304, '''82.06~''14.07', 'LNG/중유', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 35.485, 129.362),
('00000000-0000-0000-0000-000000000035', '한국동서발전(EWP)', 'LNG', '호남발전본부', '전남 여수시 월내동', '1,2호기', 1000, '''78.12~''96.06', 'LNG/중유', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 34.782, 127.702),
('00000000-0000-0000-0000-000000000036', '한국동서발전(EWP)', 'LNG', '일산발전본부', '경기 고양시 일산동구', '복합', 900, '''93.06~''96.12', 'LNG', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 37.691, 126.790),
('00000000-0000-0000-0000-000000000037', '한국동서발전(EWP)', '건설중', '음성천연가스', '충북 음성군 음성읍', '1,2호기', 1122, '''26.12(예정)', 'LNG', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 36.938, 127.686),
('00000000-0000-0000-0000-000000000038', '한국동서발전(EWP)', '건설중', '신호남천연가스', '전남 여수시 월내동', NULL, 500, '''26.12(예정)', 'LNG', NULL, 'https://www.ewp.co.kr/kor/sub/content/52.do', 34.782, 127.702);

-- '건설중' 상태를 classification이 아닌 status 필드에 반영하도록 업데이트
UPDATE public.power_plants
SET status = 
    CASE 
        WHEN classification = '건설중' THEN '건설중'
        ELSE '운영중'
    END;
